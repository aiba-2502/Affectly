## サービス名
- サービス名：「Affectly」 
- 命名背景：感情（affect）＋ly

## サービス概要
「Affectly」は、AI VTuberとLINEのようなチャット形式で会話をしながら、  
モヤモヤした気持ちや思考を言語化・記録・整理できるWebアプリです。  
対話の履歴はログとして保存され、自己理解や価値観の明確化、ライフキャリアの意思決定に活用できます。

## サービスコンセプト
気持ちがまとまらない、何に悩んでいるのか自分でもよくわからない——  
思考がまとまらず、相手にどう伝えるべきか自分でもよくわからない——
そんな状態のときに、AI VTuberとの“対話”によって自身の思考を言語化・可視化し、客観的に自分を見つめ直せる体験を提供します。

感情や思考を一人で抱え込むのではなく、優しく問いかけてくれる存在に「話す」ことで、  
気づけなかった本音や、限界を感じた瞬間、自分の価値観をログとして掘り起こせます。  

「Affectly」は、言語化 × 可視化 × 振り返りの循環を通じて、  
自身の”思考パターン”や”感情のトリガー”、つまり“自分の軸”を見つけるきっかけを支援するアプリです。

## このサービスへの思い・作りたい理由
「何がつらいのか言葉にできないけど、なんとなく限界に近い」  
「相手に自分の気持ちや思考を伝えたいけど、なかなか理解してもらえない」  
と感じる節々がありました。

そんな中、友人とお酒を飲みながら本音を語るうちに、  
「自分が無理をしていたポイント」や「本当はどうしたかったのか」に気づけた経験があります。  
つまり、その経験は“感情の言語化”と“客観的な評価”でした。  

とはいえ、こうした対話を毎回誰かと行うのは難しく、タイミングも限られます。   
だからこそ対話相手としてAI VTuberを採用することで、友人に頼る気遣いも不要で、いつでも共感を感じながら対話ができる環境を作りたいと思いました。

## 想定されるユーザー層
- 学生〜社会人での幅広い年代 
- 感情の言語化や自己分析に興味がある人（例：自己理解ツールが好き）
- キャリア・転職・生き方に悩みを抱えている人
- 限界を感じる前に自分の傾向を知っておきたい人
- VTuber・癒し系キャラクターに親しみがある人

---- 

## 本アプリのコアドメイン

1. **感情を言語化して整理する**  
　　└「自分ってこういう時に、こういう考え方をするのか」と思考のパターンや感情のトリガーに気づく

2. **限界を感じたポイントを客観視する**  
　　└ 記録を見返すことで、「あの時何がつらかったのか」「何が引き金だったのか」を客観的に分析できる

3. **人生の方向性・価値観の軸を見つける**  
　　└ 会話を積み重ねることで、何を大事にしたいのか、何に違和感があるのかが明確に浮かび上がってくる

## サービス差別化ポイント

### 「Affectly」ならではの独自性（類似サービスとの比較）

| 各サービス項目                             | [Awarefy](https://lp.awarefy.com/lp03)     | [一般的な感情日記アプリ](https://app-liv.jp/health/mental/2796/)   | Affectly（本サービス）          |
|----------------------------------|----------------------------------------------|----------------------------------------------|----------------------------------------------------------|
| 対話形式                         | ✕（対話なし）                                | ✕（入力フォーム or メモ形式）               | ☑︎ AI VTuberとの自然なチャット形式                         |
| 音声入力・会話ログ               | △（一部対応）                                | ✕                                           | ☑︎ 音声入力＋LINE風チャットでログを残せる                 |
| 感情・思考の深掘り支援           | △（短い質問やガイドあり）                   | ✕                                           | ☑︎ GPTが質問・共感を通じて深掘りしてくれる                |
| ビジュアル・親しみやすさ         | ✕（UIはシンプル）                            | △（UIはシンプル〜可愛い系）                | ☑︎ VTuberのリアクション・表情で“話しやすい空気感”を演出  |
| 感情ログの可視化・振り返り機能   | ☑︎ グラフ・記録                                | △ 感情タグはあるがログ参照性が低い           | ☑︎ カレンダー・グラフ・日付別会話履歴を一覧表示可能   |
| ゴール設計                       | △ セルフケア（気づき）                        | ✕ 明確なゴールが設計されていないことが多い   | ☑︎ **「自己理解・価値観の軸発見」を目的とした構成**        |

### 「Affectly」の価値

- **単なる日記アプリではなく、双方向の“対話型”で感情を掘り下げる設計**  
　→ 感情を書き出すだけでなく、AI VTuberとのやり取りによって、思考が自然と整理されていく体験を提供します。

- **感情ログを“資産化”する仕組み**  
　→ 感情や気づきを時系列で記録し、Lineのようななチャット形式で対話を可視化、ChatGPTのような履歴画面で日付ベースで会話記録を保存。過去の自分の思考・感情を一つの記録資産として蓄積・可視化し、思考のパターンや価値観の変化を分析できます。

- **アバターとの“関係性”による継続性の高さ**  
　→ 可視化されたVTuberアバターが問いかけたり共感したりすることで、感情表現への心理的ハードルを下げ、継続的な記録を促進します。

- **“価値観の軸”を見つけるという自己分析特化のゴール設計**  
　→ 会話を通じて、最終的にキャリア・人間関係・生き方の意思決定に役立つ「自分の軸」を見つけることをサポートします。

## 実装を予定している機能

### MVP
- ユーザー登録・ログイン機能
- LINE風チャットUI
- テキスト／音声入力によるAIとの対話
- OpenAI GPTによる自然な会話生成（思考の深掘り）
- 会話ログの保存・一覧表示
- アバターの表示（表情・セリフ）
- キーワードログ検索・フィルタ機能（日付で絞り込み）
- GPTによる分析結果・週/月の毎のサマリー(総評)

### その後の機能（本リリース）
- パスワードリセット機能
- アカウント削除機能（論理削除）
- 各ログ会話の要約と感情タグ付け
- 感情タグによるログフィルタ機能（「怒り」「逃げたい」で絞り込み）
- 感情傾向の可視化（感情カレンダー（週／月））

## 技術スタック

### バックエンド
| 機能                        | 使用技術／ライブラリ                          |
|-----------------------------|----------------------------------------------|
| フレームワーク              | Ruby on Rails 8.0.2 (API mode)               |
| データベース                | PostgreSQL 16                                |
| 認証                        | JWT + bcrypt                                 |
| AI応答生成                  | OpenAI GPT-4o / Anthropic Claude / Gemini    |
| APIドキュメント            | Rails Routes                                 |
| CORS対応                    | rack-cors                                    |

### フロントエンド
| 機能                        | 使用技術／ライブラリ                          |
|-----------------------------|----------------------------------------------|
| フレームワーク              | Next.js 15.5.0 + React 19.1.0               |
| スタイリング                | TailwindCSS v4                              |
| 状態管理                    | Zustand                                      |
| HTTPクライアント            | Axios                                        |
| 型チェック                  | TypeScript 5.9                               |
| チャットUI                  | カスタムコンポーネント（LINE風デザイン）     |
| 音声入力・認識              | Web Speech API / Whisper API（予定）        |
| アバター表示                | Live2D / pixi-live2d（実装予定）            |
| グラフ・可視化              | Chart.js / Recharts（実装予定）             |

### インフラ・開発環境
| 項目                        | 使用技術                                      |
|-----------------------------|----------------------------------------------|
| コンテナ化                  | Docker + Docker Compose                      |
| 開発環境管理                | Makefile（コマンド自動化）                   |
| コード品質                  | Rubocop + ESLint + Prettier                 |
| テスト                      | RSpec (Rails) + Jest (Next.js)              |

## MVPデプロイ環境

### 開発環境
- **フロントエンド**: http://localhost:3001
- **バックエンドAPI**: http://localhost:3000
- **データベース**: PostgreSQL on Docker (port: 5432)
- **開発用コマンド**: Makefile経由で全操作を管理

### 本番（MVP）環境構成
- **フロントエンド**: [Vercel](https://vercel.com/)（Next.js専用プラットフォーム）
- **バックエンドAPI**: [Railway](https://railway.app/)（Rails API + PostgreSQL）
- **推定月額コスト**: 約1,000〜3,000円

#### アーキテクチャ
```
┌─────────────────┐     ┌─────────────────┐
│   ユーザー       │────▶│    Vercel       │
└─────────────────┘     │   (Next.js)     │
                        │   Frontend      │
                        └────────┬────────┘
                                 │ HTTPS
                        ┌────────▼────────┐
                        │    Railway      │
                        │   (Rails API)   │
                        │    Backend      │
                        └────────┬────────┘
                                 │
                        ┌────────▼────────┐
                        │   PostgreSQL    │
                        │   (Railway)     │
                        └─────────────────┘
```

### MVPデプロイ特記事項
#### Webサーバーは不要
VercelとRailwayは**フルマネージドサービス**のため、NginxやApacheなどのWebサーバーを別途用意する必要はありません。

- **Vercel**: Edge Network、CDN、SSL証明書を自動提供
- **Railway**: Pumaサーバー、リバースプロキシ、SSL証明書を自動提供

#### データベースも自動管理
RailwayでPostgreSQL追加時：
- 自動バックアップ（日次）
- 自動スケーリング
- DATABASE_URLの自動設定
- 高可用性（HA）対応

### コスト管理
| サービス | 無料枠 | 有料プラン |
|---------|-------|-----------|
| **Vercel** | 個人利用無料 | Pro: $20/月 |
| **Railway** | $5クレジット/月 | Hobby: $5/月〜 |
| **合計** | 約0〜500円 | 約1,500〜3,000円 |

### 詳細なデプロイガイド
完全なデプロイ手順については [docs/deployment_guide.md](docs/deployment_guide.md) を参照してください。

## 画面遷移図 - Figmaリンク
https://www.figma.com/design/7LdlGw32kjHaZVHyc1o2eQ/%E5%BF%83%E3%81%AE%E3%83%AD%E3%82%B0?node-id=0-1&t=jIXvhxMQKXkdMGfm-1
